// generated by Arena
import { sql, executeQuery } from "@arena/dqs/postgres";
import env from "./env";

export default async function ({
  /**
   * Parameter key/value mapping
   *
   * For example, if a query is `SELECT * FROM table WHERE id = \{\{ id \}\}`,
   * the params that should be passed in would be `{"id": "_some_id_" }`.
   * Params is passed by the frontend
   */
  props: params,
}) {
  const { rows } = await executeQuery({
    credential: env["{{db}}"],
    query: generateQueryInContext(params),
  });
  return rows;
}

const generateQueryInContext = ({{paramKeys}}) => {
  return sql`{{query}}`;
}