// generated by Arena
import { sql } from "@arena/core/dqs/slonik";
import { connect } from "@arena/core/dqs/postgres";
import env from "./env";

export default async function ({
  /**
   * props is a collection of values used inside query template
   * and passed by the frontend
   */
  props,
}) {
  const query = generateQueryInContext(props);
  return await connect({
    connectionString: env["{{db}}"],
  }).execute(query.sql, query.values);
}

const generateQueryInContext = ({{propsKeys}}) => {
  return sql`{{query}}`;
}
