// generated by Arena
import { sql } from "@arena/functions/sql";
import { executeQuery } from "@arena/functions/sql/postgres";
import env from "./env";

export default async function ({
  /**
   * Parameter key/value mapping
   *
   * For example, if a query is `SELECT * FROM table WHERE id = {{ id }}`,
   * the params that should be passed in would be `{"id": "_some_id_" }`.
   * Params is passed by the frontend
   */
  params,
}) {
  return await executeQuery({
    connectionString: env["{{db}}"],
    query: generateQueryInContext(params),
  });
}

const generateQueryInContext = ({{paramKeys}}) => {
  return sql`{{query}}`;
}